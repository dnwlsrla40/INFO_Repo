# 트랜잭션(Transaction)

트랜잭션은 데이터베이스의 상태를 변화시키기 위해 수행하는 작업의 단위이다.

이때, 이 단위는 논리적 단위이다.

데이터베이스의 상태를 변화시킨다는 것은 무슨 말일까?

간단하게 말해서 질의어(SQL)을 이용하여 데이터베이스를 접근하는 것을 말한다.

**SQL 질의어**
- SELECT
- INSERT
- DELETE
- UPDATE

여기서 작업의 단위는 질의어 한 문장이 아니다. 트랜잭션은 논리적 단위로 이 작업 단위는 많은 질의어 명령문들을 사람이 정하는 기준에 따라 달라진다.

## 트랜잭션의 특징

### 원자성(Atomicity)

원자성은 트랜잭션이 데이터베이스에 모두 반영되던가, 아니면 전혀 반영되지 않아야한다는 것이다.

### 일관성(Consistency)

일관성은 트랜잭션의 작업 처리 결과가 항상 일관성이 있어야 한다는 것이다. 트랜잭션이 진행되는 동안 데이터베이스가 변경되더라도 업데이트된 데이터베이스로 트랜잭션이 진행되는 것이 아니라, 처음에 참조한 데이터베이스로 진행된다.

### 독립성(Isolation)

독립성은 둘 이상의 트랜잭션이 동시에 실행되고 있을 경우 어떤 하나의 트랜잭션이라도, 다른 트랜잭션의 연산에 끼어들 수 없다는 것이다.

### 지속성(Durability)

지속성은 트랜잭션이 성공적으로 완료되었을 경우, 결과는 영구적으로 반영되어야 한다는 것이다.

## Commit, Rollback 연산

Commit 연산은 하나의 트랜잭션이 성공적으로 끝났고, 데이터베이스가 일관성있는 상태에 있을 때, 하나의 트랜잭션이 끝났다는 것을 알려주기 위한 연산이다.

이 연산을 수행하면 수행했던 트랜잭션이 로그에 저장되며 후에 Rollback 연산의 단위가 된다.

Rollback 연산이란 하나의 트랜잭션 처리가 비정상적으로 종료되는 경우, 처음으로 다시 시작하거나, 부분적으로 다시 취소시키는 연산이다.

## 트랜잭션 상태

<br>

![트랜잭션 상태](/picture/트랜잭션_상태.PNG)

1. 활동(Active) : 트랜잭션이 실행중인 상태
2. 실패(Failed) : 트랜잭션 실행에 오류가 발생하여 중단된 상태
3. 철회(Aborted) : 트랜잭션이 비정상적으로 종료되어 Rollback 연산을 수행한 상태
4. 부분 완료(Partially Committed) : 트랜잭션의 마지막 연산까지 실행했지만, Commit 연산이 실행되기 직전의 상태
5. 완료(Committed) : 트랜잭션이 성공적으로 종료되어 Commit 연산을 실행한 후의 상태